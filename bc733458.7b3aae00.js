(window.webpackJsonp=window.webpackJsonp||[]).push([[275],{412:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return h})),n.d(t,"default",(function(){return m}));var a=n(1),i=n(9),o=(n(0),n(508)),r=n(511),c=(n(518),n(515)),p=(n(524),n(513)),l=(n(514),n(517),n(519),n(510),{id:"scenarios-create-at",title:"Creating an Application Template"}),s={id:"development/touchgfx-hal-development/scenarios/scenarios-create-at",title:"Creating an Application Template",description:"import Note from '@site/components/Note'\r",source:"@site/docs\\development\\touchgfx-hal-development\\scenarios\\scenarios-create-at.mdx",permalink:"/docs/development/touchgfx-hal-development/scenarios/scenarios-create-at",sidebar:"docs",previous:{title:"Changing the Pixel Format of an Application",permalink:"/docs/development/touchgfx-hal-development/scenarios/scenarios-change-pixelformat-bpp"},next:{title:"External events as triggers",permalink:"/docs/development/board-bring-up/example-gpio"}},h=[{value:"Describe Application Template",id:"describe-application-template",children:[]},{value:"Create Application Template",id:"create-application-template",children:[]},{value:"Test &amp; Verify",id:"test--verify",children:[]},{value:"Final Notes",id:"final-notes",children:[{value:"General Tips",id:"general-tips",children:[]},{value:"Version Control",id:"version-control",children:[]}]}],d={rightToc:h},u="wrapper";function m(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(o.b)(u,Object(a.a)({},d,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"Application Templates")," (ATs) are ",Object(o.b)("inlineCode",{parentName:"p"},".tpa")," files that define the ",Object(o.b)("em",{parentName:"p"},"platform")," on which a TouchGFX application runs. This approach is for developers who wish to be able to distribute easy-to-use ATs seperately from the ",Object(o.b)("em",{parentName:"p"},"UI")," code that runs on top of them. This article describes how an existing TouchGFX project can be packaged into a redistributable AT using the built-in tool ",Object(o.b)("inlineCode",{parentName:"p"},"tgfx.exe"),". For the duration of this article examples are based on an application called ",Object(o.b)("em",{parentName:"p"},'"MyApplication"'),"."),Object(o.b)("p",null,"Once you have a fully functional TouchGFX project the following steps are required to create an AT."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Describe Application Template"),"  Call ",Object(o.b)("inlineCode",{parentName:"li"},"tgfx.exe")," and edit json file (inherits from .touchgfx)"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Create Application Template")," Call ",Object(o.b)("inlineCode",{parentName:"li"},"tgfx.exe")," to finalize ",Object(o.b)("inlineCode",{parentName:"li"},".tpa")," "),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Test & Verify")," Import into designer, create- and verify application")),Object(o.b)("h2",{id:"describe-application-template"},"Describe Application Template"),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"tgfx.exe")," tool generates a configuration file (.json) that describes the internals of the AT. This information is read by TouchGFX Designer and presented to the user. Open a ",Object(o.b)("em",{parentName:"p"},"TouchGFX Environment")," console and execute the following command in the ",Object(o.b)("em",{parentName:"p"},"parent")," directory of the application:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"$ /d/TouchGFX/4.13.0/designer/tgfx.exe pack -d MyApplication\n")),Object(o.b)(r.a,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/scenarios/create-at-tgfx-zip.png",width:"550px",caption:"Prepare files for .tpa",mdxType:"Figure"}),Object(o.b)("p",null,"The following files are created in the directory where the command was run:"),Object(o.b)(r.a,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/scenarios/create-at-desc-files.png",width:"240px",caption:"List of generated files",mdxType:"Figure"}),Object(o.b)("p",null,"Before creating the final ",Object(o.b)("inlineCode",{parentName:"p"},".tpa")," file, edit ",Object(o.b)("inlineCode",{parentName:"p"},"MyApplication.json")," to control how the AT is displayed to users in TouchGFX Designer. Users should edit the following sections: "),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Author")," Use the fields in the ",Object(o.b)("em",{parentName:"li"},"Author")," section to specify name of author, contact email and a URL."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"Data")," Use the fields in the ",Object(o.b)("em",{parentName:"li"},"Data")," section to specify AT version, images, board name, vendor, description, and link to further information.")),Object(o.b)(p.a,{mdxType:"CodeHeader"},"MyApplication.json"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'   ...\n    "Author": [\n      {\n        "Name": "Chad Brody",\n        "Contact": "chad.brody@mycompany.com",\n        "URL": "http://mycompany.com/"\n      }\n    ],  \n  ...  \n  "Data": {\n    "Version": {\n      "Major": 1,\n      "Minor": 0,\n      "Build": 0\n    },\n    "Name": "MyApplication",\n    "HumanFriendlyName": "MyApplication",\n    "BoardName": "Custom STM32 Board",\n    "Type": "TGAT",\n    "Vendor": "MyCompany",\n    "Description": "This is a working project on which to base your UI on top of.",\n    "DocumentationLink": "",\n    "Category": "",\n    "Images": [\n      "http://mysite.com/MyCustomBoard-front.png",\n      "http://mysite.com/MyCustomBoard-back.png"\n    ],\n    ...\n  }\n}\n')),Object(o.b)(c.a,{mdxType:"Tip"},"Be sure to set the 'Type' attribute to ",Object(o.b)("b",null,"TGAT"),". Otherwise the AT won't show up in TouchGFX Designer!"),Object(o.b)(c.a,{mdxType:"Tip"},"TouchGFX Designer is able to display up to three images (Image references must be URLs) from this list when displaying the extended information card for an AT. The optimal resolution for the images is 400x280 pixels."),Object(o.b)("h2",{id:"create-application-template"},"Create Application Template"),Object(o.b)("p",null,"Execute the following command to create the final \xb4.tpa\xb4 file and finalize the Application Template. "),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"$ /d/TouchGFX/4.13.0/designer/tgfx.exe pack -rc -d MyApplication\n")),Object(o.b)(r.a,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/scenarios/create-at-tgfx-tpa.png",width:"570px",caption:"Create Application Template",mdxType:"Figure"}),Object(o.b)("h2",{id:"test--verify"},"Test & Verify"),Object(o.b)("p",null,"To verify that the \xb4.tpa\xb4 file can be seen by TouchGFX Designer as an AT and used to create new applications, perform the following steps:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Rename the ",Object(o.b)("inlineCode",{parentName:"li"},".tpa")," file to your requirements. "),Object(o.b)("li",{parentName:"ol"},"Copy or move the ",Object(o.b)("inlineCode",{parentName:"li"},".tpa")," file to ",Object(o.b)("inlineCode",{parentName:"li"},"C:\\TouchGFX\\4.13.0\\app\\packages"),". This allows users to import ATs into TouchGFX Designer from a local folder.")),Object(o.b)(r.a,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/scenarios/create-at-mv-to-pkg.png",width:"550",caption:"Install AT to local folder",mdxType:"Figure"}),Object(o.b)("ol",{start:3},Object(o.b)("li",{parentName:"ol"},"Open the Designer and select the AT.")),Object(o.b)(r.a,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/scenarios/create-at-designer-main.png",width:"550",caption:"MyApplication-1.0.0.tpa displayed in Designer",mdxType:"Figure"}),Object(o.b)(r.a,{noShadow:!0,imageSource:"/img/development/touchgfx-hal-development/scenarios/create-at-designer-main-info.png",width:"550",caption:"Information about the AT",mdxType:"Figure"}),Object(o.b)("h2",{id:"final-notes"},"Final Notes"),Object(o.b)("p",null,"The following section contains tips about what to consider when developing code for- and distrubuting ATs. "),Object(o.b)("h3",{id:"general-tips"},"General Tips"),Object(o.b)("p",null,"Generally, before distributing the ",Object(o.b)("inlineCode",{parentName:"p"},".tpa")," one should: "),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Ensure that all supplied IDE projects work as expected."),Object(o.b)("li",{parentName:"ol"},"Delete ",Object(o.b)("em",{parentName:"li"},"build"),"- and ",Object(o.b)("em",{parentName:"li"},"generated")," folders to reduce the size of the AT."),Object(o.b)("li",{parentName:"ol"},"Ensure that custom commands (",Object(o.b)("em",{parentName:"li"},"PostGenerate"),"-, etc.) defined in the TouchGFX project file ",Object(o.b)("inlineCode",{parentName:"li"},".touchgfx")," work as expected. "),Object(o.b)("li",{parentName:"ol"},"Ensure that the AT can be read by TouchGFX Designer and used to create a new application."),Object(o.b)("li",{parentName:"ol"},"There is no immediate way to specify an upgrade procedure between versions of ATs. ")),Object(o.b)(c.a,{mdxType:"Tip"},"Be sure to re-pack the application template after modifying the content of either the TouchGFX Project or the `.json` file."),Object(o.b)("p",null,"After distributing the ",Object(o.b)("inlineCode",{parentName:"p"},".tpa")," one should instruct users to copy the ",Object(o.b)("inlineCode",{parentName:"p"},".tpa")," file into ",Object(o.b)("inlineCode",{parentName:"p"},"C:\\TouchGFX\\4.13.0\\app\\packages")," and restart the designer, if open."),Object(o.b)("h3",{id:"version-control"},"Version Control"),Object(o.b)("p",null,"Usually, developers will keep an entire development project (Board bringup, TouchGFX AL, TouchGFX UI) in the same repository which  eliminates the need for distributable ",Object(o.b)("inlineCode",{parentName:"p"},".tpa")," files. However, for team members to be able to start a new TouchGFX application based on unified platform code is powerful when it comes to test and verification."),Object(o.b)("p",null,"For those that do distribute ",Object(o.b)("inlineCode",{parentName:"p"},".tpa")," files and/or use tools like ",Object(o.b)("inlineCode",{parentName:"p"},"repo"),", ",Object(o.b)("inlineCode",{parentName:"p"},"git submodules")," to modularize their codebase it is wise to let the version of the AT-component follow the version specified in the ",Object(o.b)("inlineCode",{parentName:"p"},".json")," descriptor mentioned previously in this article. If using a modularized approach, the ",Object(o.b)("em",{parentName:"p"},"platform")," code could still be used to create a distributable ",Object(o.b)("inlineCode",{parentName:"p"},".tpa")," file while also being used as a module in a main project struture. "),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'  "Data": {\n    "Version": {\n      "Major": 3,\n      "Minor": 0,\n      "Build": 0\n    },\n')),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"$ git tag\nv1.1.0\nv2.0.0\nv2.1.0\nv3.0.0\n")))}m.isMDXComponent=!0},509:function(e,t,n){"use strict";var a=n(5),i=n(0),o=n.n(i),r=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){var e="highlight highlight-"+this.props.type;return(o.a.createElement("div",{class:e},o.a.createElement("div",{class:"highlight-heading"},o.a.createElement("h5",null,o.a.createElement("div",{class:"highlight-icon"},this.props.icon),this.props.header)),o.a.createElement("div",{class:"highlight-content"},this.props.children)))},t}(i.Component);t.a=r},511:function(e,t,n){"use strict";var a=n(5),i=n(0),o=n.n(i),r=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.props.noShadow||!1,t=this.props.width,n=this.props.height;return e?o.a.createElement("div",{class:"figure noshadow"},o.a.createElement("a",{href:this.props.imageSource,target:"_blank"},o.a.createElement("img",{width:t,height:n,src:this.props.imageSource})),o.a.createElement("p",null,this.props.caption)):o.a.createElement("div",{class:"figure"},o.a.createElement("a",{href:this.props.imageSource,target:"_blank"},o.a.createElement("img",{width:t,height:n,src:this.props.imageSource})),o.a.createElement("p",null,this.props.caption))},t}(i.Component);t.a=r},513:function(e,t,n){"use strict";var a=n(5),i=n(0),o=n.n(i),r=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){return o.a.createElement("div",{class:"code-header"},o.a.createElement("div",null,o.a.createElement("h5",null,this.props.children)))},t}(i.Component);t.a=r},514:function(e,t,n){"use strict";var a=n(5),i=n(0),o=n.n(i),r=n(509),c=o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},o.a.createElement("path",{"fill-rule":"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})),p=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){return o.a.createElement(r.a,{color:"var(--highlight-color-further-reading)",header:"Further reading",type:"further-reading",icon:c},this.props.children)},t}(i.Component);t.a=p},515:function(e,t,n){"use strict";var a=n(5),i=n(0),o=n.n(i),r=n(509),c=o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},o.a.createElement("path",{"fill-rule":"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})),p=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){return o.a.createElement(r.a,{color:"var(--highlight-color-tip)",header:"Tip",type:"tip",icon:c},this.props.children)},t}(i.Component);t.a=p},517:function(e,t,n){"use strict";var a=n(5),i=n(0),o=n.n(i),r=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){return o.a.createElement("i",null,this.props.text)},t}(i.Component);t.a=r},518:function(e,t,n){"use strict";var a=n(5),i=n(0),o=n.n(i),r=n(509),c=o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},o.a.createElement("path",{"fill-rule":"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})),p=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){return o.a.createElement(r.a,{color:"var(--highlight-color-note)",header:"Note",type:"note",icon:c},this.props.children)},t}(i.Component);t.a=p},519:function(e,t,n){"use strict";n(520);var a=n(5),i=n(0),o=n.n(i),r=n(510),c=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){var e="/docs/api/"+this.props.link;return(o.a.createElement(r.a,{to:e},this.props.children))},t}(i.Component);t.a=c},520:function(e,t,n){"use strict";n(521)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},521:function(e,t,n){var a=n(12),i=n(13),o=n(24),r=/"/g,c=function(e,t,n,a){var i=String(o(e)),c="<"+t;return""!==n&&(c+=" "+n+'="'+String(a).replace(r,"&quot;")+'"'),c+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(c),a(a.P+a.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},524:function(e,t,n){"use strict";var a=n(5),i=n(0),o=n.n(i),r=n(509),c=o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},o.a.createElement("path",{"fill-rule":"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})),p=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){return o.a.createElement(r.a,{color:"var(--highlight-color-try)",header:"Things to try",type:"try",icon:c},this.props.children)},t}(i.Component);t.a=p}}]);