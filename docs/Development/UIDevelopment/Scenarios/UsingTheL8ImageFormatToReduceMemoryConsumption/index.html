<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Using the L8 Image Format to Reduce Memory Consumption</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="TouchGFX Documentation Â· The knowledge base for TouchGFX"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="import Figure from &#x27;@site/components/Figure&#x27;;"><meta data-react-helmet="true" property="og:description" content="import Figure from &#x27;@site/components/Figure&#x27;;"><meta data-react-helmet="true" property="og:url" content="https://touchgfx.github.io/docs/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png">


<link rel="stylesheet" href="/styles.a3c8dad0.css">

</head>
<body>

<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.png" alt="My Site Logo"></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/Introduction/Welcome">Docs</a><a class="navbar__item navbar__link" target="_blank" href="/api/">API</a><a class="navbar__item navbar__link" activeclassname="navbar__link--active" to="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx">Community</a><div class="navbar__search"><span role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.png" alt="My Site Logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Introduction/Welcome">Docs</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" href="/api/">API</a></li><li class="menu__list-item"><a class="menu__link" activeclassname="navbar__link--active" to="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx">Community</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Introduction/Welcome">Welcome</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Introduction/WhatIsTouchGFX">What is TouchGFX?</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Introduction/Installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Introduction/GettingStarted">Getting Started</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Basic Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/BasicConcepts/EmbeddedGraphics">Embedded Graphics</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/BasicConcepts/GraphicsEngine">Graphics Engine</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/BasicConcepts/Colors">Colors</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/BasicConcepts/EngineArchitecture">Engine Architecture</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/BasicConcepts/Framebuffer">Framebuffer</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/BasicConcepts/HardwareComponents">Hardware Components</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/BasicConcepts/Performance">Performance</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/BasicConcepts/MemoryUsage">Memory Usage</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/BasicConcepts/Rendering">Rendering</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/BasicConcepts/AlphaBlending">Alpha Blending</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/BasicConcepts/HardwareAcceleration">Hardware Acceleration</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/BasicConcepts/TouchGFXSoftwareLayers">TouchGFX Software Layers</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/BasicConcepts/SoftwareArchitectureMVP">Software Architecture - MVP</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Development</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/DevelopmentIntroduction">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Hardware Selection</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/HardwareSelection/HardwareSelectionIntroduction">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Hardware Components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/HardwareSelection/HardwareComponents/HardwareSelectionMCU">MCU</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/HardwareSelection/HardwareComponents/HardwareSelectionDisplay">Display</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/HardwareSelection/HardwareComponents/HardwareSelectionExternalFlash">External Flash</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/HardwareSelection/HardwareComponents/HardwareSelectionExternalRAM">External RAM</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/HardwareSelection/HardwareComponents/HardwareSelectionBus">Bus</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/HardwareSelection/FindingTheRightHardware">Finding the Right Hardware</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/HardwareSelection/HardwareSelectionScenarios">Scenarios</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Board Bring Up</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/BoardBringUp/BoardIntroduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/BoardBringUp/BoardDisplay">Display</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">TouchGFX HAL Development</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/TouchGFXHALDevelopment/TouchGFXHALDevelopmentIntroduction">Introduction</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">UI Development</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIDevelopmentIntroduction">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Software Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/software-architecture/model-view-presenter-design-pattern">Model-View-Presenter Design Pattern</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/software-architecture/screen-definition-and-mvp">Screen Definition and MVP</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/software-architecture/code-structure">Code Structure</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Working with TouchGFX</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/WorkingWithTouchGFX/CreatingANewApplication">Creating a new Application</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Designer User Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/DesignerUserGuide/StartupWindow">Startup Window</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/DesignerUserGuide/FileMenu">File Menu</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/DesignerUserGuide/MainWindow">Main Window</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/DesignerUserGuide/CanvasView">Canvas View</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/DesignerUserGuide/ImagesView">Images View</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/DesignerUserGuide/TextsView">Texts View</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/DesignerUserGuide/ConfigView">Config View</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/DesignerUserGuide/Interactions">Interactions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">TouchGFX Engine Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/TouchGFXEngineFeatures/CustomTriggersAndActions">Custom Triggers and Actions</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/TouchGFXEngineFeatures/custom-containers">Custom Containers</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/TouchGFXEngineFeatures/CanvasWidgets">Canvas Widgets</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/TouchGFXEngineFeatures/CachingBitmaps">Caching Bitmaps</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/TouchGFXEngineFeatures/CustomWidgets">Custom Widgets</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/TouchGFXEngineFeatures/CanvasWidgets">Canvas Widgets</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/TouchGFXEngineFeatures/DynamicBitmaps">Dynamic Bitmaps</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/TouchGFXEngineFeatures/BackendCommunication">Backend Communication</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">UI Components</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Buttons</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Buttons/Button">Button</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Buttons/ButtonWithLabel">ButtonWithLabel</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Buttons/ButtonWithIcon">ButtonWithIcon</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Buttons/ToggleButton">ToggleButton</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Buttons/RadioButton">RadioButton</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Buttons/RepeatButton">RepeatButton</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Buttons/FlexButton">FlexButton</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Images</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Images/Image">Image</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Images/ScalableImage">ScalableImage</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Images/TiledImage">TiledImage</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Images/AnimatedImage">AnimatedImage</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Images/TextureMapper">TextureMapper</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Containers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Containers/Container">Container</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Containers/ScrollableContainer">ScrollableContainer</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Containers/SwipeContainer">SwipeContainer</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Containers/ListLayout">ListLayout</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Containers/ModalWindow">ModalWindow</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Containers/ScrollList">ScrollList</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Containers/ScrollWheel">ScrollWheel</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">ProgressIndicators</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/ProgressIndicators/BoxProgress">BoxProgress</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/ProgressIndicators/ImageProgress">ImageProgress</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/ProgressIndicators/TextProgress">TextProgress</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/ProgressIndicators/LineProgress">LineProgress</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/ProgressIndicators/CircleProgress">CircleProgress</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Shapes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Shapes/Box">Box</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Shapes/BoxWithBorder">BoxWithBorder</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Shapes/Line">Line</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Shapes/Circle">Circle</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Shapes/Shape">Shape</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Miscellaneous</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Miscellaneous/Slider">Slider</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Miscellaneous/TextArea">TextArea</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Miscellaneous/AnalogClock">AnalogClock</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/Miscellaneous/DigitalClock">DigitalClock</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/UIComponents/GeneralUIComponentPerformance">General UI Component Performance</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Scenarios</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/Scenarios/AchievingBetterPerformanceWithCacheableContainer">Achieving Better Performance with CacheableContainer</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/Scenarios/LoadingImagesAtRuntime">Loading Images at Runtime</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/Scenarios/LoweringMemoryUsageWithPartialFrameBuffer">Lowering Memory Usage with Partial Framebuffer</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption">Using the L8 Image Format to Reduce Memory Consumption</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Development/UIDevelopment/Scenarios/UsingNonMemoryMappedFlash">Using Non-Memory Mapped Flash for storing images</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/Tutorials/Tutorial_01">Tutorial 1: Trying out the examples</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Tutorials/Tutorial_02">Tutorial 2: Creating your own application</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Tutorials/Tutorial_03">Tutorial 3: Applications with multiple screens</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Tutorials/Tutorial_04">Tutorial 4: Creating a Scroll Wheel with custom behavior</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Tutorials/Tutorial_05">Tutorial 5: Creating Custom Triggers and Actions</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Using the L8 Image Format to Reduce Memory Consumption</h1></header><div class="markdown"><p>Images in the L8 format take up less flash storage and are faster to draw than e.g. ARGB8888.</p><p>An image in L8 format consists of a color palette and a pixel array: The color palette lists up to 256 different colors specified in either 16-bit format RGB565, 24-bit format RGB888, or 32-bit format ARGB8888. The pixel array consists of one byte for each pixel. This byte is an index into the color palette (list of colors), pointing out the color for the pixel. The TouchGFX framework draws an L8 image by reading the pixels one-by-one, looking up the colors in the palette and writing these to the framebuffer. This happens automatically and is accelerated by the STM32 Chrom-ART hardware accelerator, if available on the hardware.</p><p>8-bit per pixel means that one L8 image can use 256 different colors. Another L8 image can use 256 other colors, since the two images each have their own palette.</p><div class="figure"><a href="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/l8-image-with-4x4-pixels-and-palette-with-4-colors.png" target="_blank"><img src="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/l8-image-with-4x4-pixels-and-palette-with-4-colors.png"></a><p>An L8 image with 4 x 4 pixels and a palette with 4 colors</p></div><p>Pixels are one byte (8-bit) each. The size of the pixels is therefore width x height bytes. The palette colors can be 16-bit, 24-bit, or 32 bit colors. Each color definition will therefore take up 2, 3, or 4 bytes.</p><p>Solid images should be stored in L8_RGB565 if the framebuffer is 16-bit (RGB565 format). If the framebuffer is 24-bit (RGB888) the L8 images must be stored in L8_RGB888 format. If the image is transparent the 32-bit format (ARGB8888) must be used:</p><table><thead><tr><th><strong>Format</strong></th><th><strong>Framebuffer format</strong></th><th><strong>Supports transparent pixels</strong></th></tr></thead><tbody><tr><td>L8_RGB565</td><td>16-bit RGB565</td><td>No</td></tr><tr><td>L8_RGB888</td><td>24-bit RGB888</td><td>No</td></tr><tr><td>L8_ARGB8888</td><td>Both</td><td>Yes</td></tr></tbody></table><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><li>Read more about palette image formats here: <a to="https://en.wikipedia.org/wiki/Indexed_color" href="https://en.wikipedia.org/wiki/Indexed_color">https://en.wikipedia.org/wiki/Indexed_color</a></li></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="example-l8-image"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#example-l8-image" title="Direct link to heading">#</a>Example L8 Image</h2><p>Here is a typical logo image. This image only uses 16 different colors:</p><div class="figure"><a href="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/touchgfx-logo-with-16-24bit-colors.png" target="_blank"><img src="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/touchgfx-logo-with-16-24bit-colors.png"></a><p>200 x 200 pixels L8 image with 16 different 24-bit colors.</p></div><p>The size in flash of this image is significant lower than the original image in the standard 24-bit format (RGB888). The table below lists the flash usage for this concrete image for the three different palette formats and for the non L8 format</p><table><thead><tr><th><strong>Format</strong></th><th><strong>Size of pixels (bytes)</strong></th><th><strong>Size of palette (bytes)</strong></th><th><strong>Total size (bytes)</strong></th><th><strong>Reduction in %</strong></th></tr></thead><tbody><tr><td>RGB888</td><td>120,000</td><td>0</td><td>120,000</td><td>-</td></tr><tr><td>L8_RGB565</td><td>40,000</td><td>32</td><td>40,032</td><td>66.6%</td></tr><tr><td>L8_RGB888</td><td>40,000</td><td>48</td><td>40,048</td><td>66.6%</td></tr><tr><td>L8_ARGB8888</td><td>40,000</td><td>64</td><td>40,064</td><td>66.6%</td></tr></tbody></table><p>We see that the size reduction is very large, and that the size of the palette is insignificant on a medium sized image.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="using--l8-images-in-touchgfx-designer"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#using--l8-images-in-touchgfx-designer" title="Direct link to heading">#</a>Using  L8 Images in TouchGFX Designer</h2><p>It is very easy to use the L8 image format in TouchGFX. The only thing to do is to configure the image converter to convert the image from PNG to L8 format. Here we will go through the whole process:</p><p>Start a new project in the TouchGFX Designer. Copy your image to the assets/images folder in the new project:</p><div class="figure"><a href="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/touchgfx-logo-in-assets-images-folder.png" target="_blank"><img src="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/touchgfx-logo-in-assets-images-folder.png"></a><p>Images folder of TouchGFX project</p></div><p>Now go to the TouchGFX Designer and click the <a href="/docs/Development/UIDevelopment/DesignerUserGuide/ImagesView">Images tab</a> in the top bar and select the image:</p><div class="figure"><a href="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/touchgfx-logo-in-touchgfx-designer-images.png" target="_blank"><img src="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/touchgfx-logo-in-touchgfx-designer-images.png"></a><p>Logo in Images view of TouchGFX Designer</p></div><p>On the right side on the window, select image format L8_RGB888 (this example is running 24 bit colors).</p><p>An image Widget can now be inserted on the canvas (here we inserted a Box in the background):</p><div class="figure"><a href="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/touchgfx-logo-in-touchgfx-designer-canvas.png" target="_blank"><img src="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/touchgfx-logo-in-touchgfx-designer-canvas.png"></a><p>Image widget on Canvas in TouchGFX Designer</p></div><p>Nothing needs to be changed in the UI code. The Image Converter converts the PNG file and generates an image in L8 format because of the configuration we did in the Images tab.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="transparent-images"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#transparent-images" title="Direct link to heading">#</a>Transparent Images</h2><p>As mentioned above it is also possible to use L8 format for images with transparency.</p><div class="figure"><a href="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/button-image-32bit-non-opaque-argb8888.png" target="_blank"><img src="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/button-image-32bit-non-opaque-argb8888.png"></a><p>170 x 60 pixels button image in 32 bit format ARGB8888</p></div><p>The above image uses 108 colors (many shades of blue). This image can use the format L8_ARGB8888. The size will be significantly lower:</p><table><thead><tr><th><strong>Format</strong></th><th><strong>Size of pixels (bytes)</strong></th><th><strong>Size of palette (bytes)</strong></th><th><strong>Total size (bytes)</strong></th><th><strong>Reduction in %</strong></th></tr></thead><tbody><tr><td>ARGB888</td><td>40,800</td><td>0</td><td>40,800</td><td>-</td></tr><tr><td>L8_ARGB8888</td><td>10,200</td><td>432</td><td>10,632</td><td>73.9%</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="converting-an-image-to-256-colors"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#converting-an-image-to-256-colors" title="Direct link to heading">#</a>Converting an image to 256 colors</h2><p>Many images use more than 256 colors. This is common for images that are photo-realistic or images with gradients. These images cannot directly be converted to L8 image format in the TouchGFX Designer, because they contain to many colors.</p><p>In many cases though, it is possible to reduce the number of colors used in a specific image. Ideally a graphics artist will convert/supply the images in 256 colors, however image manipulation tools can also perform the conversion without loosing too much of the image quality.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="paintnet"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#paintnet" title="Direct link to heading">#</a>Paint.NET</h3><p>The simplest way is to use Paint.NET. Open the original image and use Save As to save the image in another file. In the Save Configuration dialog, select 8-bit, as pixel depth:</p><div class="figure"><a href="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/paint-dot-net-convert-to-8bit.png" target="_blank"><img src="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/paint-dot-net-convert-to-8bit.png"></a><p>Paint.NET saving image in 8 bit format</p></div><p>Now use the new PNG in your project. Remember to select the L8_ARGB8888 format in the <a href="/docs/Development/UIDevelopment/DesignerUserGuide/ImagesView">Images tab</a> in the TouchGFX Designer. Shadows are not handled very well, but icons with transparent edges looks good in many cases. It is possible to adjust the &quot;Transparency threshold&quot; value and in some cases improve the result.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="imagemagick"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#imagemagick" title="Direct link to heading">#</a>ImageMagick</h3><p>Another suitable tool, that sometimes results in better L8 images, is ImageMagick (download from <a to="www.imagemagick.org" href="www.imagemagick.org">www.imagemagick.org</a>). This tool can convert images from the command line. This makes it suitable for use in scripts. To convert the clock_bg.png to an image using at most 256 colors, use the following command:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">magick convert clock_bg.png -colors 256 clock_bg_l8_256.png</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>ImageMagick can also tell you how many colors are used in an image. Use this command:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-cmd codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">magick identify -format %k Blue_Buttons_Round_Edge_small.png</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="comparison"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#comparison" title="Direct link to heading">#</a>Comparison</h3><p>The three images (original, L8 using Paint.NET, L8 using ImageMagick) are seen below for comparison:</p><div class="figure"><a href="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/clock-image-original-paint-dot-net-image-magick-comparison.png" target="_blank"><img src="/img/Development/UIDevelopment/Scenarios/UsingTheL8ImageFormatToReduceMemoryConsumption/clock-image-original-paint-dot-net-image-magick-comparison.png"></a><p>Clock image comparison, left to right: original, Paint.NET, ImageMagick</p></div><p>The middle clock lost the details in the border shadow. In both cases the central part of the clock background looks useable.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="manual-configuration"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#manual-configuration" title="Direct link to heading">#</a>Manual Configuration</h2><p>It is also possible to select image formats without using the TouchGFX Designer. The image formats are specified in file application.config located in the project root:</p><div class="code-header"><div><h5>application.config</h5></div></div><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-JSON codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;image_configuration&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    images&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Blue_Buttons_Round_Edge_small.png&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;format&quot;: &quot;L8_ARGB8888&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;dither_algorithm&quot;: &quot;2&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;alpha_dither&quot;: &quot;yes&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;layout_rotation&quot;: &quot;0&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;opaque_image_format&quot;: &quot;RGB888&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;nonopaque_image_format&quot;: &quot;ARGB8888&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;section&quot;: &quot;ExtFlashSection&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;extra_section&quot;: &quot;ExtFlashSection&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>The &quot;images&quot; section under &quot;image_configuration&quot; specifies the format for individual images. If an image is not mentioned here, the image will be generated in the default format (opaque_image_format or nonopaque_image_format).</p><p>We recommend using the TouchGFX Designer for image configuration when possible.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Development/UIDevelopment/Scenarios/LoweringMemoryUsageWithPartialFrameBuffer"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">Â« Lowering Memory Usage with Partial Framebuffer</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Development/UIDevelopment/Scenarios/UsingNonMemoryMappedFlash"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Using Non-Memory Mapped Flash for storing images Â»</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#example-l8-image" class="contents__link">Example L8 Image</a></li><li><a href="#using--l8-images-in-touchgfx-designer" class="contents__link">Using  L8 Images in TouchGFX Designer</a></li><li><a href="#transparent-images" class="contents__link">Transparent Images</a></li><li><a href="#converting-an-image-to-256-colors" class="contents__link">Converting an image to 256 colors</a><ul><li><a href="#paintnet" class="contents__link">Paint.NET</a></li><li><a href="#imagemagick" class="contents__link">ImageMagick</a></li><li><a href="#comparison" class="contents__link">Comparison</a></li></ul></li><li><a href="#manual-configuration" class="contents__link">Manual Configuration</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center">Copyright Â© 2020 ST Microelectronics</div></div></footer>
</div>

<script src="/styles.08d990fc.js"></script>

<script src="/runtime~main.64205319.js"></script>

<script src="/main.01221053.js"></script>

<script src="/1.b14096fd.js"></script>

<script src="/103.1a1068aa.js"></script>

<script src="/20ac7829.b96f7db0.js"></script>

<script src="/17896441.f9d13f7c.js"></script>

<script src="/00636385.f21fd5be.js"></script>


</body>
</html>