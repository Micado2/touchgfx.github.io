<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TouchGFX: Scanline Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="touchgfx.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="touchgfxlogo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TouchGFX
   &#160;<span id="projectnumber">v4.13.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classtouchgfx_1_1_scanline.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classtouchgfx_1_1_scanline-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Scanline Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class is used to transfer data from class <a class="el" href="classtouchgfx_1_1_outline.html" title="An internal class that implements the main rasterization algorithm. ">Outline</a> (or a similar one) to the rendering buffer.  
 <a href="classtouchgfx_1_1_scanline.html#details">More...</a></p>

<p><code>#include &lt;touchgfx/canvas_widget_renderer/Scanline.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtouchgfx_1_1_scanline_1_1iterator.html">iterator</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An iterator to help go through all the elements that make up a <a class="el" href="classtouchgfx_1_1_scanline.html" title="This class is used to transfer data from class Outline (or a similar one) to the rendering buffer...">Scanline</a>.  <a href="classtouchgfx_1_1_scanline_1_1iterator.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aab95c38a939b0ce160bb94523c775076"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtouchgfx_1_1_scanline_aab95c38a939b0ce160bb94523c775076.html#aab95c38a939b0ce160bb94523c775076">Scanline</a> ()</td></tr>
<tr class="memdesc:aab95c38a939b0ce160bb94523c775076"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="classtouchgfx_1_1_scanline_aab95c38a939b0ce160bb94523c775076.html#aab95c38a939b0ce160bb94523c775076">More...</a><br /></td></tr>
<tr class="separator:aab95c38a939b0ce160bb94523c775076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c2cbdd9e8537612a797a8cf7718c03d"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtouchgfx_1_1_scanline_a5c2cbdd9e8537612a797a8cf7718c03d.html#a5c2cbdd9e8537612a797a8cf7718c03d">~Scanline</a> ()</td></tr>
<tr class="memdesc:a5c2cbdd9e8537612a797a8cf7718c03d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="classtouchgfx_1_1_scanline_a5c2cbdd9e8537612a797a8cf7718c03d.html#a5c2cbdd9e8537612a797a8cf7718c03d">More...</a><br /></td></tr>
<tr class="separator:a5c2cbdd9e8537612a797a8cf7718c03d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad20897c5c8bd47f5d4005989bead0e55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtouchgfx_1_1_scanline_ad20897c5c8bd47f5d4005989bead0e55.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a> ()</td></tr>
<tr class="memdesc:ad20897c5c8bd47f5d4005989bead0e55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the <a class="el" href="classtouchgfx_1_1_scanline.html" title="This class is used to transfer data from class Outline (or a similar one) to the rendering buffer...">Scanline</a> object in preparation for the handling the next <a class="el" href="classtouchgfx_1_1_scanline.html" title="This class is used to transfer data from class Outline (or a similar one) to the rendering buffer...">Scanline</a>.  <a href="classtouchgfx_1_1_scanline_ad20897c5c8bd47f5d4005989bead0e55.html#ad20897c5c8bd47f5d4005989bead0e55">More...</a><br /></td></tr>
<tr class="separator:ad20897c5c8bd47f5d4005989bead0e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9af5210487af724fb8e732de14998de6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtouchgfx_1_1_scanline_a9af5210487af724fb8e732de14998de6.html#a9af5210487af724fb8e732de14998de6">resetSpans</a> ()</td></tr>
<tr class="memdesc:a9af5210487af724fb8e732de14998de6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the spans in preparation for the next <a class="el" href="classtouchgfx_1_1_scanline.html" title="This class is used to transfer data from class Outline (or a similar one) to the rendering buffer...">Scanline</a>.  <a href="classtouchgfx_1_1_scanline_a9af5210487af724fb8e732de14998de6.html#a9af5210487af724fb8e732de14998de6">More...</a><br /></td></tr>
<tr class="separator:a9af5210487af724fb8e732de14998de6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe6fc2427f2ea222a033025057dbb5dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtouchgfx_1_1_scanline_abe6fc2427f2ea222a033025057dbb5dc.html#abe6fc2427f2ea222a033025057dbb5dc">addCell</a> (int x, int y, unsigned cover)</td></tr>
<tr class="memdesc:abe6fc2427f2ea222a033025057dbb5dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a single cell to the current <a class="el" href="classtouchgfx_1_1_scanline.html" title="This class is used to transfer data from class Outline (or a similar one) to the rendering buffer...">Scanline</a>.  <a href="classtouchgfx_1_1_scanline_abe6fc2427f2ea222a033025057dbb5dc.html#abe6fc2427f2ea222a033025057dbb5dc">More...</a><br /></td></tr>
<tr class="separator:abe6fc2427f2ea222a033025057dbb5dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dce4e661cdff002391b552484cc2d92"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtouchgfx_1_1_scanline_a1dce4e661cdff002391b552484cc2d92.html#a1dce4e661cdff002391b552484cc2d92">addSpan</a> (int x, int y, unsigned len, unsigned cover)</td></tr>
<tr class="memdesc:a1dce4e661cdff002391b552484cc2d92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a span of cells to the current <a class="el" href="classtouchgfx_1_1_scanline.html" title="This class is used to transfer data from class Outline (or a similar one) to the rendering buffer...">Scanline</a>.  <a href="classtouchgfx_1_1_scanline_a1dce4e661cdff002391b552484cc2d92.html#a1dce4e661cdff002391b552484cc2d92">More...</a><br /></td></tr>
<tr class="separator:a1dce4e661cdff002391b552484cc2d92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a271f31cdbe00694dd092c78a391a5ca3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtouchgfx_1_1_scanline_a271f31cdbe00694dd092c78a391a5ca3.html#a271f31cdbe00694dd092c78a391a5ca3">isReady</a> (int y) const</td></tr>
<tr class="memdesc:a271f31cdbe00694dd092c78a391a5ca3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a <a class="el" href="classtouchgfx_1_1_scanline.html" title="This class is used to transfer data from class Outline (or a similar one) to the rendering buffer...">Scanline</a> is ready for rendering.  <a href="classtouchgfx_1_1_scanline_a271f31cdbe00694dd092c78a391a5ca3.html#a271f31cdbe00694dd092c78a391a5ca3">More...</a><br /></td></tr>
<tr class="separator:a271f31cdbe00694dd092c78a391a5ca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaf0a0403410a186997c1477e8bf6897"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtouchgfx_1_1_scanline_afaf0a0403410a186997c1477e8bf6897.html#afaf0a0403410a186997c1477e8bf6897">getY</a> () const</td></tr>
<tr class="memdesc:afaf0a0403410a186997c1477e8bf6897"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets y coordinate, i.e. the vertical offset of the <a class="el" href="classtouchgfx_1_1_scanline.html" title="This class is used to transfer data from class Outline (or a similar one) to the rendering buffer...">Scanline</a>.  <a href="classtouchgfx_1_1_scanline_afaf0a0403410a186997c1477e8bf6897.html#afaf0a0403410a186997c1477e8bf6897">More...</a><br /></td></tr>
<tr class="separator:afaf0a0403410a186997c1477e8bf6897"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289bfc684b21eeb9f4d524ae00686b7b"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtouchgfx_1_1_scanline_a289bfc684b21eeb9f4d524ae00686b7b.html#a289bfc684b21eeb9f4d524ae00686b7b">getNumSpans</a> () const</td></tr>
<tr class="memdesc:a289bfc684b21eeb9f4d524ae00686b7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets number spans in the <a class="el" href="classtouchgfx_1_1_scanline.html" title="This class is used to transfer data from class Outline (or a similar one) to the rendering buffer...">Scanline</a>.  <a href="classtouchgfx_1_1_scanline_a289bfc684b21eeb9f4d524ae00686b7b.html#a289bfc684b21eeb9f4d524ae00686b7b">More...</a><br /></td></tr>
<tr class="separator:a289bfc684b21eeb9f4d524ae00686b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class is used to transfer data from class <a class="el" href="classtouchgfx_1_1_outline.html" title="An internal class that implements the main rasterization algorithm. ">Outline</a> (or a similar one) to the rendering buffer. It's organized very simple. The class stores information of horizontal spans to render it into a pixel-map buffer. Each span has initial X, length, and an array of bytes that determine the alpha values for each pixel. So, the restriction of using this class is 256 levels of Anti-Aliasing, which is quite enough for any practical purpose. Before using this class you should know the minimal and maximal pixel coordinates of your scanline. The protocol of using is: 1. <a class="el" href="classtouchgfx_1_1_scanline_ad20897c5c8bd47f5d4005989bead0e55.html#ad20897c5c8bd47f5d4005989bead0e55" title="Resets the Scanline object in preparation for the handling the next Scanline. ">reset()</a></p><ol type="1">
<li><a class="el" href="classtouchgfx_1_1_scanline_abe6fc2427f2ea222a033025057dbb5dc.html#abe6fc2427f2ea222a033025057dbb5dc" title="Adds a single cell to the current Scanline. ">addCell()</a> / <a class="el" href="classtouchgfx_1_1_scanline_a1dce4e661cdff002391b552484cc2d92.html#a1dce4e661cdff002391b552484cc2d92" title="Adds a span of cells to the current Scanline. ">addSpan()</a> - accumulate scanline. You pass y coordinate into these functions in order to make scanline know the last Y. Before calling <a class="el" href="classtouchgfx_1_1_scanline_abe6fc2427f2ea222a033025057dbb5dc.html#abe6fc2427f2ea222a033025057dbb5dc" title="Adds a single cell to the current Scanline. ">addCell()</a> / <a class="el" href="classtouchgfx_1_1_scanline_a1dce4e661cdff002391b552484cc2d92.html#a1dce4e661cdff002391b552484cc2d92" title="Adds a span of cells to the current Scanline. ">addSpan()</a> you should check with method isReady(y) if the last Y has changed. It also checks if the scanline is not empty. When forming one scanline the next x coordinate must be always greater than the last stored one, i.e. it works only with ordered coordinates.</li>
<li>If the current scanline <a class="el" href="classtouchgfx_1_1_scanline_a271f31cdbe00694dd092c78a391a5ca3.html#a271f31cdbe00694dd092c78a391a5ca3" title="Checks if a Scanline is ready for rendering. ">isReady()</a> you should render it and then call <a class="el" href="classtouchgfx_1_1_scanline_a9af5210487af724fb8e732de14998de6.html#a9af5210487af724fb8e732de14998de6" title="Resets the spans in preparation for the next Scanline. ">resetSpans()</a> before adding new cells/spans.</li>
<li>Rendering:</li>
</ol>
<p><a class="el" href="classtouchgfx_1_1_scanline.html" title="This class is used to transfer data from class Outline (or a similar one) to the rendering buffer...">Scanline</a> provides an iterator class that allows you to extract the spans and the cover values for each pixel. Be aware that clipping has not been done yet, so you </p><h2>should perform it yourself. Use <a class="el" href="classtouchgfx_1_1_scanline_1_1iterator.html" title="An iterator to help go through all the elements that make up a Scanline. ">Scanline::iterator</a> to render spans: </h2>
<p>int baseX = scanline.getBaseX(); // base X. Should be added to the span's X // "scanline" is a const reference to the // scanline passed in.</p>
<p>int y = scanline.y(); // y coordinate of the scanline</p>
<hr/>
<p> ...Perform vertical clipping here... </p><hr/>
<p><a class="el" href="classtouchgfx_1_1_scanline_1_1iterator.html" title="An iterator to help go through all the elements that make up a Scanline. ">Scanline::iterator</a> span(scanline);</p>
<p>unsigned char* row = renderingBuffer-&gt;row(y); // The the address of the beginning // of the current row</p>
<p>unsigned num_spans = scanline.getNumSpans(); // Number of spans. It's guaranteed that // numSpans is always greater than 0.</p>
<p>do { int x = span.next() + baseX; // The beginning X of the span</p>
<p>const int8u covers* = span.getCovers(); // The array of the cover values</p>
<p>int numPix = span.getNumPix(); // Number of pixels of the span. // Always greater than 0, still we // should use "int" instead of // "unsigned" because it's more // convenient for clipping</p>
<hr/>
<p> ...Perform horizontal clipping here... ...you have x, covers, and pix_Fromcount... </p><hr/>
<p>unsigned char* dst = row + x; // Calculate the start address of the row. // In this case we assume a simple // grayscale image 1-byte per pixel. do { *dst++ = *covers++; // Hypotetical rendering. } while (&ndash;numPix); } while (&ndash;numSpans); // numSpans cannot be 0, so this loop is quite safe</p>
<p>The question is: why should we accumulate the whole scanline when we could render just separate spans when they're ready? That's because using the scanline is in general faster. When is consists of more than one span the conditions for the processor cash system are better, because switching between two different areas of memory (that can be large ones) occurs less frequently. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacetouchgfx.html">touchgfx</a></li><li class="navelem"><a class="el" href="classtouchgfx_1_1_scanline.html">Scanline</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
