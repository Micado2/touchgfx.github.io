(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{164:function(e,t,o){"use strict";o.r(t),o.d(t,"frontMatter",(function(){return h})),o.d(t,"metadata",(function(){return p})),o.d(t,"rightToc",(function(){return b})),o.d(t,"default",(function(){return g}));var i=o(1),n=o(9),r=(o(0),o(262)),c=(o(263),o(268)),a=o(264),l=o(276),s=o(275),d=o(267),u=o(265),h={id:"using-ides-with-touchgfx",title:"Using IDEs with TouchGFX"},p={id:"development/ui-development/working-with-touchgfx/using-ides-with-touchgfx",title:"Using IDEs with TouchGFX",description:"import Figure from '@site/components/Figure';",source:"@site/docs\\development\\ui-development\\working-with-touchgfx\\using-ides-with-touchgfx.mdx",permalink:"/docs/development/ui-development/working-with-touchgfx/using-ides-with-touchgfx",sidebar:"docs",previous:{title:"Code Structure",permalink:"/docs/development/ui-development/software-architecture/code-structure"},next:{title:"Widgets and Containers",permalink:"/docs/development/ui-development/working-with-touchgfx/widgets-and-containers"}},b=[{value:"Prerequisite: GCC version",id:"prerequisite-gcc-version",children:[]},{value:"Invoke TouchGFX Makefile from IDE",id:"invoke-touchgfx-makefile-from-ide",children:[]},{value:"Add TouchGFX code files to your own project",id:"add-touchgfx-code-files-to-your-own-project",children:[{value:"Required files",id:"required-files",children:[]},{value:"Include paths",id:"include-paths",children:[]},{value:"Compiler switches",id:"compiler-switches",children:[]},{value:"Linker",id:"linker",children:[]}]},{value:"Asset generation",id:"asset-generation",children:[]},{value:"Flashing and debugging",id:"flashing-and-debugging",children:[]}],m={rightToc:b},f="wrapper";function g(e){var t=e.components,o=Object(n.a)(e,["components"]);return Object(r.b)(f,Object(i.a)({},m,o,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"When creating a new TouchGFX project, either through the TouchGFX Designer or CubeMX, the following project files and libraries for using proprietary IDEs are available:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Keil uVision ",Object(r.b)(a.a,{text:"(Target only)",mdxType:"InlineNote"})),Object(r.b)("li",{parentName:"ul"},"IAR Embedded Workbench ",Object(r.b)(a.a,{text:"(Target only)",mdxType:"InlineNote"})),Object(r.b)("li",{parentName:"ul"},"CubeIDE ",Object(r.b)(a.a,{text:"(Target only)",mdxType:"InlineNote"})),Object(r.b)("li",{parentName:"ul"},"Microsoft Visual Studio ",Object(r.b)(a.a,{text:"(Simulator only)",mdxType:"InlineNote"}))),Object(r.b)("p",null,"Note that not all project files are present in your project at the same time. The tool chain selected in CubeMX is the one that will be generated, by default CubeIDE is selected."),Object(r.b)(c.a,{mdxType:"FurtherReading"},"How to change the tool chain is described ",Object(r.b)(u.a,{to:"/docs/development/board-bring-up/how-to/01-create-project",mdxType:"Link"},"here"),"."),Object(r.b)("p",null,"In addition makefiles and libraries for shell-based compilation with a GCC cross compiler for ARM targets are also provided. This article will help you configure third-party GCC-based IDEs for TouchGFX application development. Basically any IDE which is able to invoke the GCC cross compiler should be useable."),Object(r.b)(d.a,{mdxType:"Note"},"Please note that this article describes only the setup procedure in general terms - support for all the various IDEs cannot be provided, but hopefully the information presented here is sufficient for you to use TouchGFX with your favorite IDE."),Object(r.b)("p",null,"This article will describe two different approaches to getting TouchGFX to work with other IDEs. One approach is to invoke the TouchGFX Makefile from within the IDE. This is probably the easiest approach, but is not always desirable if you want to have more control over the compilation process and file locations. Alternatively you can manually add the necessary TouchGFX files and configuration options to your existing project."),Object(r.b)("h2",{id:"prerequisite-gcc-version"},"Prerequisite: GCC version"),Object(r.b)("p",null,"This article assumes that you will use either the GCC cross compiler toolchain distributed with the TouchGFX environment shell, or alternatively your own GCC toolchain of a flavor that is able to link with the TouchGFX core library compiled using the environment shell toolchain."),Object(r.b)("p",null,"The GCC compiler used:"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{}),"$ arm-none-eabi-gcc.exe -v\nTarget: arm-none-eabi\nThread model: single\ngcc version 6.3.1 20170620 (release) [ARM/embedded-6-branch revision 249437] (GNU Tools for ARM Embedded Processors 6-2017-q2-update)\n")),Object(r.b)("p",null,"The compiler can be obtained from ",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"https://launchpad.net/gcc-arm-embedded"}),"https://launchpad.net/gcc-arm-embedded"),"."),Object(r.b)("h2",{id:"invoke-touchgfx-makefile-from-ide"},"Invoke TouchGFX Makefile from IDE"),Object(r.b)("p",null,"A hopefully quick-and-dirty way of compiling TouchGFX applications from within your IDE is to simply invoke the Makefile included in the projects created by the TouchGFX Designer.\nTo use the TouchGFX environment shell to compile an application for target, you must navigate to the TouchGFX application root folder and execute the following command:"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{}),"$ make -f target/gcc/Makefile\n")),Object(r.b)("p",null,"Now, instead of invoking the make command from the TouchGFX environment shell, it is also possible to invoke it from within your IDE. The executables used by the shell (make, arm-none-eabi-gcc, ..) are actually normal Windows x86 executables, so the make application can be executed by a normal command prompt, provided that the following environment variables have been configured."),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{}),"C:\\<touchfx_installation_directory>\\touchgfx\\env\\MinGW\\bin\nC:\\<touchfx_installation_directory>\\touchgfx\\env\\MinGW\\msys\\1.0\\Ruby193\\bin\nC:\\<touchfx_installation_directory>\\touchgfx\\env\\MinGW\\msys\\1.0\\bin\nC:\\<touchfx_installation_directory>\\touchgfx\\env\\MinGW\\msys\\1.0\\gnu-arm-gcc\\bin\n")),Object(r.b)("p",null,"After setting up the needed Windows environment variables it is now possible to invoke the ",Object(r.b)(l.a,{text:"make",mdxType:"InlineCode"})," command on the appropriate TouchGFX makefile directly from within your IDE. The exact command you need to execute is the same as when compiling from the shell, namely:"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{}),"$ make -f target/gcc/Makefile\n")),Object(r.b)(d.a,{mdxType:"Note"},"Please note that your current directory must be the root directory of the application you want to compile."),Object(r.b)("h2",{id:"add-touchgfx-code-files-to-your-own-project"},"Add TouchGFX code files to your own project"),Object(r.b)("p",null,"If you instead wish to have more control over the build process and file locations, you can instead integrate the relevant TouchGFX code files into your own existing project, and add the necessary include paths and compiler switches in order to make it compile."),Object(r.b)("h3",{id:"required-files"},"Required files"),Object(r.b)("p",null,"Basically you will need to add the same TouchGFX files to your IDE project as are compiled when building with make from the TouchGFX environment shell. Exactly which files to include depend on your target board, since the low-level drivers are different for each board. In order to determine what files you need, the recommended approach is to simply try compiling the application using the TouchGFX environment shell for the appropriate board. The compilation process will mention each file being compiled, thereby giving you a list of exactly the files you need to add."),Object(r.b)("h3",{id:"include-paths"},"Include paths"),Object(r.b)("p",null,"You will need to add the following include paths to your compilation (here mentioned relative to the directory where you have unpacked TouchGFX):"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{}),"<touchgfx_application_root_directory>/gui/include\n<touchgfx_application_root_directory>/generated/gui_generated/include\n<touchgfx_application_root_directory>/platform/os\n<touchgfx_application_root_directory>/generated/fonts/include\n<touchgfx_application_root_directory>/generated/images/include\n<touchgfx_application_root_directory>/generated/texts/include\n<touchgfx_application_root_directory>/touchgfx/framework/include\n")),Object(r.b)(s.a,{mdxType:"Tip"},"In addition to the above include paths, you also need to add include paths for the board specific code. Take a look in the ",Object(r.b)(l.a,{text:"target/gcc/Makefile",mdxType:"InlineCode"})," for this information."),Object(r.b)("h3",{id:"compiler-switches"},"Compiler switches"),Object(r.b)("p",null,"Like with include paths, there are some generic compiler switches which must be enabled, and also some that are specific for the processor core and concrete board. The compiler switches used to compile the TouchGFX core library are listed below, for each core. Some of these options will be mandatory for the compilation of your code as well in order for the linker to work, and some are optional. Those that are known to be mandatory are marked in bold."),Object(r.b)("h4",{id:"cortex-m3-cores"},"Cortex-M3 cores"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},'-mcpu=cortex-m3 -march=armv7-m  -Wno-psabi -DCORE_M3 -D__irq=""')," -fno-rtti -fno-exceptions -fno-strict-aliasing -fdata-sections -ffunction-sections"),Object(r.b)("h4",{id:"cortex-m4f-cores"},"Cortex-M4f cores"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"-fno-rtti -fno-exceptions -mfpu=fpv4-sp-d16 -mfloat-abi=softfp -mcpu=cortex-m4 -D__irq=\u201d\u201c")," -mthumb -mno-thumb-interwork -std=c99 -Os -fno-strict-aliasing -fdata-sections -ffunction-sections -Wno-psabi -DCORE_M4 -march=armv7e-m"),Object(r.b)("h4",{id:"cortex-m7-cores"},"Cortex-M7 cores"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"-fno-rtti -fno-exceptions -mfpu=fpv5-sp-d16 -mfloat-abi=softfp -mcpu=cortex-m7 -D__irq=\u201d\u201c")," -mthumb -mno-thumb-interwork -std=c99 -Os -fno-strict-aliasing -fdata-sections -ffunction-sections -Wno-psabi -DCORE_M7"),Object(r.b)("h3",{id:"linker"},"Linker"),Object(r.b)("h4",{id:"core-library"},"Core library"),Object(r.b)("p",null,"You must link with the TouchGFX core library. Depending on your MCU, this would be either"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{}),"touchgfx/lib/core/cortex-m4f/gcc/libtouchgfx.a\ntouchgfx/lib/core/cortex-m7/gcc/libtouchgfx.a\n")),Object(r.b)("h4",{id:"linker-options"},"Linker options"),Object(r.b)("p",null,"In addition, you will need a few linker options. The following options are what TouchGFX uses:"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{}),"Cortex-M4f: -Wl,-static -nostartfiles -mthumb -mno-thumb-interwork -fno-exceptions -fno-rtti -Wl,--gc-sections -mcpu=cortex-m4 -march=armv7e-m -Wno-psabi\nCortex-M7: -Wl,-static -nostartfiles -mthumb -mno-thumb-interwork -fno-exceptions -fno-rtti -Wl,--gc-sections  -mcpu=cortex-m7 -Wno-psabi\n")),Object(r.b)("h2",{id:"asset-generation"},"Asset generation"),Object(r.b)("p",null,"To compile a project, assets must be generated as well. This can be done either by invoking the generated Makefile with the option 'assets':"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{}),"make -f <path_to_Makefile> assets\n")),Object(r.b)("p",null,"Another way to generated assets, is to use the imageconverter and text/font-converter directly."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Imageconverter"),"\nThe imageconverter can be found in your projects touchgfx folder ",Object(r.b)(l.a,{text:"touchgfx/framework/tools/imageconvert/build",mdxType:"InlineCode"})," built for linux and Windows."),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{}),"usage: imageconvert [-c configfile] [-f inputfile -o outputfile | -r inputdir -w outputdir]\n")),Object(r.b)("p",null,"When calling the imageconvert.out executable, it will look for a configfile (",Object(r.b)(l.a,{text:"application.config",mdxType:"InlineCode"}),") file in the folder it is called from."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Textconverter"),"\nThe textconverter can be found in your projects touchgfx folder ",Object(r.b)(l.a,{text:"touchgfx\\framework\\tools\\textconvert",mdxType:"InlineCode"})," as a ruby file: ",Object(r.b)(l.a,{text:"main.rb",mdxType:"InlineCode"}),"."),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{}),"usage: main.rb file.xlsx path/to/fontconvert.out path/to/fonts_output_dir path/to/localization_output_dir path/to/font/asset calling_path\n")),Object(r.b)("h2",{id:"flashing-and-debugging"},"Flashing and debugging"),Object(r.b)("p",null,"Depending on your linker settings, you will most likely get an ",Object(r.b)(l.a,{text:".elf",mdxType:"InlineCode"})," or ",Object(r.b)(l.a,{text:".hex",mdxType:"InlineCode"})," file produced as output. It is possible to deploy and debug TouchGFX applications from within most IDEs, typically using a GDB server, or whichever other approach your IDE provides. Concrete pointers for each available IDE cannot be provided, but you might find inspiration in the ",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"/docs/development/ui-development/working-with-touchgfx/compiling-and-flashing"}),"Compiling & Flashing")," article, which explains how to flash a board with a GCC-produced ELF/HEX file."))}g.isMDXComponent=!0},264:function(e,t,o){"use strict";var i=o(5),n=o(0),r=o.n(n),c=function(e){function t(){return e.apply(this,arguments)||this}return Object(i.a)(t,e),t.prototype.render=function(){return r.a.createElement("i",null,this.props.text)},t}(n.Component);t.a=c},267:function(e,t,o){"use strict";var i=o(5),n=o(0),r=o.n(n),c=o(266),a=r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},r.a.createElement("path",{"fill-rule":"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})),l=function(e){function t(){return e.apply(this,arguments)||this}return Object(i.a)(t,e),t.prototype.render=function(){return r.a.createElement(c.a,{color:"var(--highlight-color-note)",header:"Note",type:"note",icon:a},this.props.children)},t}(n.Component);t.a=l}}]);