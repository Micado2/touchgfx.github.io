(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{125:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return r})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return d}));var i=n(1),a=n(9),l=(n(0),n(215)),o=(n(216),{id:"Tutorial_04",title:"Tutorial 4: Creating a Scroll Wheel with custom behavior"}),r={id:"Tutorials/Tutorial_04",title:"Tutorial 4: Creating a Scroll Wheel with custom behavior",description:"import Figure from '@site/components/Figure';",source:"@site/docs\\Tutorials\\Tutorial_04.mdx",permalink:"/docs/Tutorials/Tutorial_04",sidebar:"docs",previous:{title:"Tutorial 3: Applications with multiple screens",permalink:"/docs/Tutorials/Tutorial_03"}},c=[{value:"Step 1: Creating a Custom Container",id:"step-1-creating-a-custom-container",children:[{value:"Adding widgets to the Custom Container",id:"adding-widgets-to-the-custom-container",children:[]},{value:"Adding the Custom Container to a screen",id:"adding-the-custom-container-to-a-screen",children:[]}]},{value:"Step 2: Creating a Scroll Wheel",id:"step-2-creating-a-scroll-wheel",children:[{value:"Creating the Scroll Wheel",id:"creating-the-scroll-wheel",children:[]},{value:"Adding Items to the Scroll Wheel",id:"adding-items-to-the-scroll-wheel",children:[]}]},{value:"Step 3: Adding user code to Scroll Wheel",id:"step-3-adding-user-code-to-scroll-wheel",children:[{value:"Change Image and Text in MenuElement",id:"change-image-and-text-in-menuelement",children:[]},{value:"Update the Items in the Scroll Wheel",id:"update-the-items-in-the-scroll-wheel",children:[]}]},{value:"Step 4: Adding custom behavior to Scroll Wheel",id:"step-4-adding-custom-behavior-to-scroll-wheel",children:[{value:"Add Custom Behavior to MenuElement",id:"add-custom-behavior-to-menuelement",children:[]}]}],s={rightToc:c},h="wrapper";function d(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(l.b)(h,Object(i.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"In this tutorial, you will learn how to create and configure the two widgets Custom Container and Scroll Wheel. A Custom Container is a widget that enables you to create a custom widget by combining multiple other widgets and add specific behavior for the widgets in the Custom Container. The Scroll Wheel is a widget used for creating a scrollable menu, consisting of multiple selectable items. The tutorial will also teach how user code can be created to change the behavior fo a widget."),Object(l.b)("p",null,"More information about the Custom Container and Scroll Wheel can be found in the two articles, (###TODO Links - Containers and Custom Containers and Scroll Wheel)."),Object(l.b)("p",null,"The graphics for the tutorial can be downloaded from this ",Object(l.b)("a",Object(i.a)({parentName:"p"},{href:"/download/Tutorials/tutorial04/touchgfx_tutorial4.zip"}),"link"),". Unzip the file in the images folder under assets, which for the project used in this tutorial is MyApplication2\\assets\\images."),Object(l.b)("h2",{id:"step-1-creating-a-custom-container"},"Step 1: Creating a Custom Container"),Object(l.b)("p",null,"Similar to step 1 in tutorial 2, start by creating a new project with the TouchGFX Designer. When the new project is ready, change from the screens tab in the TouchGFX Designer to the Custom Container."),Object(l.b)("p",null,Object(l.b)("img",Object(i.a)({parentName:"p"},{src:"/img/Tutorials/tutorial04/selecting_CC.png",alt:"Selecting the Custom Container menu",title:"Selecting the Custom Container menu"}))," "),Object(l.b)("p",null,"The tab for creating a Custom Container is similar to the Screens tab and creating a new Custom Container is done in the same way as creating a new screen. After a Custom Container is created widgets, except Custom Container, can be added, along with edit the size and name of the Custom Container."),Object(l.b)("p",null,'In the Custom Container tab, use the blue plus icon to create a new Custom Container and rename it "MenuElement", change the width (W) to 390 and height (H) to 70.'),Object(l.b)("p",null,Object(l.b)("img",Object(i.a)({parentName:"p"},{src:"/img/Tutorials/tutorial04/creating_CC.png",alt:"Creating a Custom Container and setting it properties",title:"Creating a Custom Container and setting it properties"}))," "),Object(l.b)("h3",{id:"adding-widgets-to-the-custom-container"},"Adding widgets to the Custom Container"),Object(l.b)("p",null,"With Custom Container created and its properties set, widgets can be added to the Custom Container. The Custom Container is going to consist of an image and a text area with a wildcard. The two widgets are inserted in the following way:"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(i.a)({parentName:"tr"},{align:null}),"Widget"),Object(l.b)("th",Object(i.a)({parentName:"tr"},{align:null}),"Properties"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(i.a)({parentName:"tr"},{align:null}),"Image"),Object(l.b)("td",Object(i.a)({parentName:"tr"},{align:null}),Object(l.b)("ul",null,Object(l.b)("li",null,"Name: icon"),Object(l.b)("li",null,"Image: icon00.png"),Object(l.b)("li",null,"Location:",Object(l.b)("ul",null,Object(l.b)("li",null,"X: 34"),Object(l.b)("li",null,"Y: 17")))))),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(i.a)({parentName:"tr"},{align:null}),"TextArea"),Object(l.b)("td",Object(i.a)({parentName:"tr"},{align:null}),Object(l.b)("ul",null,Object(l.b)("li",null,"Name: text"),Object(l.b)("li",null,"Location:",Object(l.b)("ul",null,Object(l.b)("li",null,"X: 93, Y: 23"))),Object(l.b)("li",null,"Text:",Object(l.b)("ul",null,Object(l.b)("li",null,"Text: Menu Element ","<","value",">"),Object(l.b)("li",null,"Wildcard 1:",Object(l.b)("ul",null,Object(l.b)("li",null,"Initial Value: 00"),Object(l.b)("li",null,"Buffer size: 3"))),Object(l.b)("li",null,"Typography: 20px"),Object(l.b)("li",null,"Alignment: Left"))),Object(l.b)("li",null,"Appearance:",Object(l.b)("ul",null,Object(l.b)("li",null,"Color: #FFFFFFFF")))))))),Object(l.b)("p",null,Object(l.b)("img",Object(i.a)({parentName:"p"},{src:"/img/Tutorials/tutorial04/adding_content_cc.png",alt:"Adding content to the Custom Container",title:"Adding content to the Custom Container"}))," "),Object(l.b)("h3",{id:"adding-the-custom-container-to-a-screen"},"Adding the Custom Container to a screen"),Object(l.b)("p",null,'Going back to the Screens tab, it is now possible to select the "MenuElement" in the widget menu under Custom Container. Place a black box as background and add a couple of the created Custom Container on the canvas. '),Object(l.b)("p",null,Object(l.b)("img",Object(i.a)({parentName:"p"},{src:"/img/Tutorials/tutorial04/inserting_cc.png",alt:"Inserting the Custom Container as a widget on a screen",title:"Inserting the Custom Container as a widget on a screen"}))," "),Object(l.b)("h2",{id:"step-2-creating-a-scroll-wheel"},"Step 2: Creating a Scroll Wheel"),Object(l.b)("p",null,'In this step of tutorial 4, we will create a Scroll Wheel by using the Custom Container, "MenuElement", created in step 1. As described in step 1, the Scroll Wheel is used to create a scrollable menu containing multiple selectable items. The items in the wheel are dynamically updated when scrolling and when selecting an item, it is moved into focus.'),Object(l.b)("p",null,'Adding items to the Scroll Wheel is done by selecting a Custom Container to use as the "Item Template". The concept of "Item Template" works by using the widgets in the Custom Container as the foundation for the items in the Scroll Wheel and use user code to update the widgets in the items at runtime.'),Object(l.b)("h3",{id:"creating-the-scroll-wheel"},"Creating the Scroll Wheel"),Object(l.b)("p",null,'Before creating the Scroll Wheel, remove the Custom Containers on the screen, leaving only the black box as the background. Select the Scroll Wheel located in the widgets tab under section Containers. Create a Scroll Wheel and set the location properties to X = 208, Y = 45 and H = 390 and change the name to "scrollWheel".'),Object(l.b)("p",null,Object(l.b)("img",Object(i.a)({parentName:"p"},{src:"/img/Tutorials/tutorial04/insertSW.png",alt:"Inserting the Scroll Wheel and setting the name and location properties",title:"Inserting the Scroll Wheel and setting the name and location properties"}))," "),Object(l.b)("h3",{id:"adding-items-to-the-scroll-wheel"},"Adding Items to the Scroll Wheel"),Object(l.b)("p",null,'Select "MenuElement" created in step 1 as the "Item Template", which is done with the drop-down list under the Scroll Wheel property "Item Template". The number of items in the Scroll Wheel is also set under "Item Template". Set this to 20 items. Since the Scroll Wheel works by having a selected item in focus, setting where the selected item is positioned, is done by setting "Selected Item Offset" under the property "List Apperance". We want the selected item to be in the middle of the Scroll Wheel and are therefore setting "Selected Item Offset" to 160.'),Object(l.b)("p",null,Object(l.b)("img",Object(i.a)({parentName:"p"},{src:"/img/Tutorials/tutorial04/add_cc_to_sw.png",alt:"Adding the Custom Container to the Scroll Wheel and adjusting its properties",title:"Adding the Custom Container to the Scroll Wheel and adjusting its properties"}))," "),Object(l.b)("p",null,'To highlight the area of the "scrollWheel", the two pictures background.png, and overlay.png from the .zip file downloaded in step 1 are used and is added to the application as Image widgets. The two images is a background that highlights the area of "scrollWheel" and an overlay which hides the items in "scrollWheel" when the are moved to the edge of "scrollWheel".'),Object(l.b)("p",null,'The image background.png are placed in X = 205 and Y = 45 and is placed behind "scrollWheel" so the items in "scrollWheel" is drawn op top of the background. The overlay.png is placed in X = 0 and Y = 0 on top of "scrollWheel" meaning that the items are drawn beneath overlay.png thereby hiding the items where overlay.png is not transparent.'),Object(l.b)("p",null,Object(l.b)("img",Object(i.a)({parentName:"p"},{src:"/img/Tutorials/tutorial04/graphics_added.png",alt:"Graphics added to the screen with the Scroll Wheel",title:"Graphics added to the screen with the Scroll Wheel"}))," "),Object(l.b)("p",null,'Since we only have adjusted the static properties for "scrollWheel", logic has not been added to it. Running the application will, therefore, result in a scrollable menu consisting of 20 items that all show the same. In the next step, we will add the logic to the "scrollWheel" with user code which updates the items in the wheel at runtime.'),Object(l.b)("h2",{id:"step-3-adding-user-code-to-scroll-wheel"},"Step 3: Adding user code to Scroll Wheel"),Object(l.b)("p",null,'With the Scroll Wheel, "scrollWheel", created and configured in the TouchGFX Designer, this step will create the logic, via user code, that updates the items in "scrollWheel", so they display different graphics based on the position of the item in the wheel. This step will, therefore, work with integrating designer generated code with user code. A more detailes description of integrating designer code with user code can be found (###TODO link to Designer generated code article).'),Object(l.b)("h3",{id:"change-image-and-text-in-menuelement"},"Change Image and Text in MenuElement"),Object(l.b)("p",null,'Since the items in the Scroll Wheel are based on the Custom Container "MenuElement", created in step 1, user code for changing the icon and updating the wildcard needs to be added to "MenuElement". When a Custom Container is created in the TouchGFX Designer it generates a .hpp and .cpp file with the same name as the Custom Container which is where the user code should be integrated. The location of the files generated for "MenuElement" in the example application are:'),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"MyApplication2\\gui\\include\\gui\\containersMenuElement.hpp")),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"MyApplication2\\gui\\src\\containers\\MenuElement.cpp")),Object(l.b)("p",null,'Enabling the items in "scrollWheel" to change their text and icon is done by adding the function ',Object(l.b)("inlineCode",{parentName:"p"},"setNumber(int no)"),' to "MenuElement". The function uses the variable ',Object(l.b)("inlineCode",{parentName:"p"},"no")," to decide which icon the Image widget should show and change the Wildcard in the Text Area widget to the value of ",Object(l.b)("inlineCode",{parentName:"p"},"no"),"."),Object(l.b)("p",null,"The declaration and implementation of ",Object(l.b)("inlineCode",{parentName:"p"},"setNumber(int no)")," is done in the ",Object(l.b)("inlineCode",{parentName:"p"},"MenuElement.hpp")," which is shown below."),Object(l.b)("p",null,Object(l.b)("img",Object(i.a)({parentName:"p"},{src:"/img/Tutorials/tutorial04/menuElement_hpp_code.png",alt:"MenuElement.hpp with the setNumber(int no) function",title:"MenuElement.hpp with the setNumber(int no) function"}))," "),Object(l.b)("p",null,"With the code added to update the content of the MenuElement, the next thing to do is to add code which updates the items in the Scroll Wheel."),Object(l.b)("h3",{id:"update-the-items-in-the-scroll-wheel"},"Update the Items in the Scroll Wheel"),Object(l.b)("p",null,"When creating a Scroll Wheel, the TouchGFX Designer generates a virtual function which is called each time a new item in the Scroll Wheel becomes visible. Overriding this function in the user code enables the code to interact with the items in the Scroll Wheel."),Object(l.b)("p",null,"The name of the function is the name of the Scroll Wheel appended with UpdatedItem. For the tutorial, the function is called ",Object(l.b)("inlineCode",{parentName:"p"},"scrollWheelUpdateItem(MenuElement& item, int16_t itemIndex)"),"."),Object(l.b)("p",null,"The parameter ",Object(l.b)("inlineCode",{parentName:"p"},"itemIndex")," is an index value informing which item is currently being updated and ",Object(l.b)("inlineCode",{parentName:"p"},"item")," is a reference to an instance of MenuElement which is currently visible in the Scroll Wheel. With ",Object(l.b)("inlineCode",{parentName:"p"},"itemIndex")," informing which item is being updated, ",Object(l.b)("inlineCode",{parentName:"p"},"setNumber()")," is called for item which will change the content of the item being updated based on the value of ",Object(l.b)("inlineCode",{parentName:"p"},"itemIndex"),". The code used for updating the Scroll Wheel items is shown below."),Object(l.b)("p",null,Object(l.b)("img",Object(i.a)({parentName:"p"},{src:"/img/Tutorials/tutorial04/Screen1View_hpp_code.png",alt:"Screen1View.hpp with the scrollWheelUpdateItem function",title:"Screen1View.hpp with the scrollWheelUpdateItem function"}))," "),Object(l.b)("p",null,"Running the simulator for the application now shows that the text for the items contains the value of their index and the icons change based on which item is showing. The images below shows an example of the simulator running with the code implemented."),Object(l.b)("p",null,Object(l.b)("img",Object(i.a)({parentName:"p"},{src:"/img/Tutorials/tutorial04/running_sim.png",alt:"Running the simulator",title:"Running the simulator"}))," "),Object(l.b)("h2",{id:"step-4-adding-custom-behavior-to-scroll-wheel"},"Step 4: Adding custom behavior to Scroll Wheel"),Object(l.b)("p",null,"In the last step of tutorial 4, we will add custom behavior for the Scroll Wheel, by making it move in a circular pattern when scrolling through the items, thereby moving in a pattern similar to a dial."),Object(l.b)("h3",{id:"add-custom-behavior-to-menuelement"},"Add Custom Behavior to MenuElement"),Object(l.b)("p",null,"Getting the Scroll Wheel to move in a dial pattern, is done by shifting the horizontal position of the Image and Text widget for each item that is visible in the Scroll Wheel. To do this the function ",Object(l.b)("inlineCode",{parentName:"p"},"setY()"),' for "MenuElement" is overridden in ',Object(l.b)("inlineCode",{parentName:"p"},"MenuElement.hpp"),". The ",Object(l.b)("inlineCode",{parentName:"p"},"setY()")," function is called for a Custom Container each time it is moved in the vertical direction and is used for redrawing the Custom Container in its new position. By overriding ",Object(l.b)("inlineCode",{parentName:"p"},"setY()"),", we are able to rearrange the Image and Text widget each time the Scroll Wheel is moved. The image below describes how to implement the new ",Object(l.b)("inlineCode",{parentName:"p"},"setY()")," function and shift the the two widgets in ",Object(l.b)("inlineCode",{parentName:"p"},"MenuElement.hpp"),"."),Object(l.b)("p",null,Object(l.b)("img",Object(i.a)({parentName:"p"},{src:"/img/Tutorials/tutorial04/setY.png",alt:"Implementation of the new setY() in MenuElement.hpp",title:"Implementation of the new setY() in MenuElement.hpp"}))," "),Object(l.b)("p",null,"With the new ",Object(l.b)("inlineCode",{parentName:"p"},"setY()")," function implemented, running the simulator shows that the Scroll Wheel is now moving in a dial pattern aligning with the curve from the overlay."),Object(l.b)("p",null,Object(l.b)("img",Object(i.a)({parentName:"p"},{src:"/img/Tutorials/tutorial04/running_sim_02.png",alt:"Running the simulator",title:"Running the simulator"}))," "),Object(l.b)("p",null,"This concludes tutorial 4. To learn more about the concepts that have been used throughout the tutorial the chapters below discuss some concepts that you have worked with:"),Object(l.b)("p",null,"(###TODO Insert link)\nScrollWheel: Describes how to create and configure the Scroll Wheel in the TouchGFX Designer and how to create the logic in user code."),Object(l.b)("p",null,'(###TODO Insert link)\n"Containers and Custom Containers" discuss the widgets container and Custom Container and provide an example for how too create and use a Custom Container.'))}d.isMDXComponent=!0},215:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var i=n(0),a=n.n(i);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),h=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r({},t,{},e)),n},d=function(e){var t=h(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=Object(i.forwardRef)((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),d=h(n),u=i,b=d["".concat(o,".").concat(u)]||d[u]||p[u]||l;return n?a.a.createElement(b,r({ref:t},s,{components:n})):a.a.createElement(b,r({ref:t},s))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,o=new Array(l);o[0]=b;var r={};for(var c in t)hasOwnProperty.call(t,c)&&(r[c]=t[c]);r.originalType=e,r[u]="string"==typeof e?e:i,o[1]=r;for(var s=2;s<l;s++)o[s]=n[s];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},216:function(e,t,n){"use strict";var i=n(5),a=n(0),l=n.n(a),o=function(e){function t(){return e.apply(this,arguments)||this}return Object(i.a)(t,e),t.prototype.render=function(){var e=this.props.noShadow||!1,t=this.props.width,n=this.props.height;return e?l.a.createElement("div",{class:"figure noshadow"},l.a.createElement("a",{href:this.props.imageSource,target:"_blank"},l.a.createElement("img",{width:t,height:n,src:this.props.imageSource})),l.a.createElement("p",null,this.props.caption)):l.a.createElement("div",{class:"figure"},l.a.createElement("a",{href:this.props.imageSource,target:"_blank"},l.a.createElement("img",{width:t,height:n,src:this.props.imageSource})),l.a.createElement("p",null,this.props.caption))},t}(a.Component);t.a=o}}]);