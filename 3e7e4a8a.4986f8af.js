(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{246:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return p})),n.d(t,"rightToc",(function(){return d})),n.d(t,"default",(function(){return m}));var o=n(1),i=n(9),r=(n(0),n(508)),a=n(509),l=(n(513),n(519)),c=n(517),u=n(518),s={id:"compiling-and-flashing",title:"Compiling & Flashing"},p={id:"development/ui-development/working-with-touchgfx/compiling-and-flashing",title:"Compiling & Flashing",description:"import Link from '@docusaurus/Link';\r",source:"@site/docs\\development\\ui-development\\working-with-touchgfx\\compiling-and-flashing.mdx",permalink:"/docs/development/ui-development/working-with-touchgfx/compiling-and-flashing",sidebar:"docs",previous:{title:"Simulator",permalink:"/docs/development/ui-development/working-with-touchgfx/simulator"},next:{title:"Debugging",permalink:"/docs/development/ui-development/working-with-touchgfx/debugging"}},d=[{value:"Compiling TouchGFX Applications",id:"compiling-touchgfx-applications",children:[{value:"Compiling for PC Simulator",id:"compiling-for-pc-simulator",children:[]},{value:"Compiling for Target Hardware",id:"compiling-for-target-hardware",children:[]}]},{value:"Flashing STM32 Evaluation Kits",id:"flashing-stm32-evaluation-kits",children:[{value:"GCC &amp; TouchGFX Designer",id:"gcc--touchgfx-designer",children:[]},{value:"CubeIDE",id:"cubeide",children:[]},{value:"IAR",id:"iar",children:[]},{value:"Keil",id:"keil",children:[]}]},{value:"Flashing Custom Hardware",id:"flashing-custom-hardware",children:[]}],h={rightToc:d},b="wrapper";function m(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)(b,Object(o.a)({},h,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"This section describes how to go from TouchGFX application code to executing program, that is how to compile and flash in a specific setup."),Object(r.b)("h2",{id:"compiling-touchgfx-applications"},"Compiling TouchGFX Applications"),Object(r.b)("p",null,"When compiling a TouchGFX application, there are two options; compiling for the PC simulator or compiling for the target hardware."),Object(r.b)("h3",{id:"compiling-for-pc-simulator"},"Compiling for PC Simulator"),Object(r.b)("p",null,"There are two options for compiling projects for the PC Simulator; GCC and Visual Studio. ",Object(r.b)("br",null),"\nBoth of these options are always available, since they are generated by TouchGFX Designer."),Object(r.b)("h4",{id:"gcc"},"GCC"),Object(r.b)("p",null,"The makefile is located at ",Object(r.b)(c.a,{text:"<touchgfx_application_root_folder>/simulator/gcc/Makefile",mdxType:"InlineCode"})),Object(r.b)("p",null,"TouchGFX includes a MinGW environment, that comes preinstalled with a GCC compiler and GNU Make, making it easy to execute the generated Makefile for the PC simulator."),Object(r.b)("p",null,"The TouchGFX Environment can be launched either from ",Object(r.b)(c.a,{text:"<touchgfx_installation_directory>/env/MinGW/msys/1.0/msys.bat",mdxType:"InlineCode"}),' or from the shortcut added to the Windows start menu, named "TouchGFX x.y.z Environment" where x, y and z describe the version number.'),Object(r.b)("p",null,"After launching the TouchGFX Environment and navigating to the TouchGFX Application root folder, the simple command below can be executed to produce a simulator.exe file."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{}),"make -f simulator/gcc/Makefile\n")),Object(r.b)("p",null,"The simulator executable can then be launched from the TouchGFX Environment with the following command."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{}),"./build/bin/simulator.exe\n")),Object(r.b)("p",null,"The PC Simulator can also be compiled and launched from TouchGFX Designer, by using the ",Object(r.b)(a.a,{to:"/docs/development/ui-development/designer-user-guide/main-window#run-simulator",mdxType:"Link"},"Run Simulator")," command."),Object(r.b)("h4",{id:"visual-studio"},"Visual Studio"),Object(r.b)("p",null,"To compile the PC Simulator using Visual Studio, simply open the generated solution file located at ",Object(r.b)(c.a,{text:"<touchgfx_application_root_folder>/simulator/msvs/Application.sln",mdxType:"InlineCode"})," using Visual Studio."),Object(r.b)("p",null,"The PC Simulator can be launched directly from Visual Studio, enabling ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"/docs/development/ui-development/working-with-touchgfx/debugging"}),"code debugging"),"."),Object(r.b)(l.a,{mdxType:"Note"},"Before being able to compile with GCC or Visual Studio, Run the ",Object(r.b)(a.a,{to:"/docs/development/ui-development/designer-user-guide/main-window#generate-code",mdxType:"Link"},"Generate")," command from TouchGFX Designer."),Object(r.b)("h3",{id:"compiling-for-target-hardware"},"Compiling for Target Hardware"),Object(r.b)("p",null,"Compiling projects for STM32 Evaluation Kits is quite simple for ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"/docs/introduction/getting-started#application-template--ui-template"}),"Application Template")," based applications.",Object(r.b)("br",null)),Object(r.b)("p",null,"Each application template contain project files for GCC, CubeIDE, IAR and Keil:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"GCC: ",Object(r.b)(c.a,{text:"<project_root_folder>/gcc/MakeFile",mdxType:"InlineCode"})),Object(r.b)("li",{parentName:"ul"},"CubeIDE: ",Object(r.b)(c.a,{text:"<project_root_folder>/STM32CubeIDE/.cproject",mdxType:"InlineCode"})),Object(r.b)("li",{parentName:"ul"},"IAR: ",Object(r.b)(c.a,{text:"<project_root_folder>/EWARM/Project.eww",mdxType:"InlineCode"})),Object(r.b)("li",{parentName:"ul"},"Keil: ",Object(r.b)(c.a,{text:"<project_root_folder>/MDK-ARM/<STM32_evaluation_kit_name>.uvprojx",mdxType:"InlineCode"}))),Object(r.b)("p",null,"The active tool chain is set from CubeMX and is set to CubeIDE by default. ",Object(r.b)(u.a,{text:"Please note that all project files are not present at the same time. The generated project file depends on the selected tool chain in CubeMX",mdxType:"InlineNote"})),Object(r.b)("p",null,"TouchGFX includes a MinGW environment, that comes preinstalled with the GNU Embedded Toolchain for Arm and GNU Make, making it easy to execute the included Makefile for the target hardware."),Object(r.b)("p",null,"The TouchGFX Environment can be launched either from ",Object(r.b)(c.a,{text:"<touchgfx_installation_directory>/env/MinGW/msys/1.0/msys.bat",mdxType:"InlineCode"}),' or from the shortcut added to the Windows start menu "TouchGFX x.y.z Environment"'),Object(r.b)("p",null,"After launching the TouchGFX Environment and navigating to the project root folder, the simple command below can be executed to compile the project for the target hardware."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{}),"make -f gcc/Makefile\n")),Object(r.b)(l.a,{mdxType:"Note"},"Before being able to compile with GCC, CubeIDE, IAR or Keil, run the ",Object(r.b)(a.a,{to:"/docs/development/ui-development/designer-user-guide/main-window#generate-code",mdxType:"Link"},"Generate")," command from TouchGFX Designer."),Object(r.b)("h2",{id:"flashing-stm32-evaluation-kits"},"Flashing STM32 Evaluation Kits"),Object(r.b)("p",null,"Flashing projects to STM32 Evaluation Kits is quite simple with projects based on premade ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"/docs/introduction/getting-started#application-template--ui-template"}),"Application Template")," .",Object(r.b)("br",null)),Object(r.b)("p",null,"Each project, when build, produces a binary that can be flashed by\neither ",Object(r.b)(a.a,{target:"_blank",to:"https://www.st.com/en/development-tools/stsw-link004.html",mdxType:"Link"},"ST Link Utility")," or ",Object(r.b)(a.a,{target:"_blank",to:"https://www.st.com/en/development-tools/stm32cubeprog.html",mdxType:"Link"},"Cube Programmer")),Object(r.b)("p",null,"Therefore these tools must be installed to proceed with flashing."),Object(r.b)("p",null,"It is suggested to install these tools to their default location."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"ST Link Utility default install location:",Object(r.b)("br",null),Object(r.b)(c.a,{text:"C:/Program Files (x86)/STMicroelectronics/STM32 ST-LINK Utility/ST-LINK Utility",mdxType:"InlineCode"})),Object(r.b)("li",{parentName:"ul"},"Cube Programmer default install location:",Object(r.b)("br",null),Object(r.b)(c.a,{text:"C:/Program Files/STMicroelectronics/STM32Cube/STM32CubeProgrammer",mdxType:"InlineCode"}))),Object(r.b)(l.a,{mdxType:"Note"},"The Application Templates do not provide any flash loaders for flashing directly from within IAR, Keil, CubeIDE or other IDEs."),Object(r.b)("h3",{id:"gcc--touchgfx-designer"},"GCC & TouchGFX Designer"),Object(r.b)("p",null,"The Makefile included with an Application Template located at ",Object(r.b)(c.a,{text:"<project_root_folder>/gcc/MakeFile",mdxType:"InlineCode"})," has a built in flash command, as shown below, that uses either ST Link Utility or Cube Programmer (depending on the AT) to flash the STM32 Evaluation Kit. You can of course also use the desktop version of the flash tools to flash the boards with the generated .hex files."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{}),"make -f gcc/Makefile flash\n")),Object(r.b)("p",null,"The .hex file is located at ",Object(r.b)(c.a,{text:"<project_root_folder>/TouchGFX/build/bin/target.hex",mdxType:"InlineCode"})),Object(r.b)("p",null,"It is also possible to only flash the internal flash and thus skipping the external part. This can reduce the flash time considerable if you have a large set of images. However, you need to be sure that the content for the external flash has not changed since you flashed the external flash last time. If it has, and you do not reflash it, you will see strange behaviour. In this case reflash both the internal and external flash."),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{}),"make -f gcc/Makefile intflash\n")),Object(r.b)("p",null,"The .hex file is located at ",Object(r.b)(c.a,{text:"<project_root_folder>/TouchGFX/build/bin/inttarget.hex",mdxType:"InlineCode"})),Object(r.b)("p",null,"The Application Template also provides the configuration for TouchGFX Designer to be able to flash projects via the ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"/docs/development/ui-development/designer-user-guide/main-window#run-target"}),"Run Target Command"),". The command used by TouchGFX Designer to flash can be seen and overridden in the ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"/docs/development/ui-development/designer-user-guide/config-view#build"}),"Build Section")," of the ",Object(r.b)("a",Object(o.a)({parentName:"p"},{href:"/docs/development/ui-development/designer-user-guide/config-view"}),"Config View")," in TouchGFX Designer."),Object(r.b)("h3",{id:"cubeide"},"CubeIDE"),Object(r.b)("p",null,"Application Templates provide support for flashing project compiled with CubeIDE, by using the .elf file output by CubeIDE, with the Cube Programmer."),Object(r.b)("p",null,"The .elf file is located at ",Object(r.b)(c.a,{text:"<project_root_folder>/STM32CubeIDE/Debug/<STM32_evaluation_kit_name>.elf",mdxType:"InlineCode"})),Object(r.b)(u.a,{text:"e.g. C:/TouchGFXProjects/MyApplication/STM32CubeIDE/Debug/STM32F746G_DISCO.elf",mdxType:"InlineNote"}),Object(r.b)("h3",{id:"iar"},"IAR"),Object(r.b)("p",null,"The Application Templates provide support for flashing project compiled with IAR, by using the .hex file output by IAR, with the Cube Programmer."),Object(r.b)("p",null,"The .hex file is located at ",Object(r.b)(c.a,{text:"<project_root_folder>/EWARM/<STM32_evaluation_kit_name>/Exe/<STM32_evaluation_kit_name>.hex",mdxType:"InlineCode"})),Object(r.b)(u.a,{text:"e.g. C:/TouchGFXProjects/MyApplication/MDK-ARM/STM32F469I-DISCO/STM32F469I-DISCO.hex",mdxType:"InlineNote"}),Object(r.b)("h3",{id:"keil"},"Keil"),Object(r.b)("p",null,"The Application Templates provide support for flashing project compiled with Keil, by using the .hex file output by Keil, with the Cube Programmer."),Object(r.b)("p",null,"The .hex file is located at ",Object(r.b)(c.a,{text:"<project_root_folder>/MDK-ARM/<STM32_evaluation_kit_name>/<STM32_evaluation_kit_name>.hex",mdxType:"InlineCode"})),Object(r.b)(u.a,{text:"e.g. C:/TouchGFXProjects/MyApplication/MDK-ARM/STM32F469I-DISCO/STM32F469I-DISCO.hex",mdxType:"InlineNote"}),Object(r.b)("h2",{id:"flashing-custom-hardware"},"Flashing Custom Hardware"),Object(r.b)("p",null,"If instead what needs to be flashed is custom hardware, and not a predefined hardware setup like an STM32 Evaluation Kit, you can still use STM32CubeProgrammer. STM32CubeProgrammer does not necessarily come with a flash loading mechanism for your specific external memory. It is however possible to create a custom flash loader. Read the ",Object(r.b)(a.a,{to:"https://www.st.com/resource/en/user_manual/dm00403500-stm32cubeprogrammer-software-description-stmicroelectronics.pdf",mdxType:"Link"},"user manual on developing customized loaders for your external memory")," to find more info."))}m.isMDXComponent=!0},508:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var o=n(0),i=n.n(o);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=i.a.createContext({}),s=function(e){var t=i.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},p=function(e){var t=s(e.components);return i.a.createElement(u.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},b=Object(o.forwardRef)((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,a=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=s(n),d=o,b=p["".concat(a,".").concat(d)]||p[d]||h[d]||r;return n?i.a.createElement(b,l({ref:t},u,{components:n})):i.a.createElement(b,l({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,a=new Array(r);a[0]=b;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[d]="string"==typeof e?e:o,a[1]=l;for(var u=2;u<r;u++)a[u]=n[u];return i.a.createElement.apply(null,a)}return i.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},509:function(e,t,n){"use strict";var o=n(1),i=n(0),r=n.n(i),a=n(39),l=n(510),c=n(24),u=n.n(c);t.a=function(e){var t,n=e.to,c=e.href,s=n||c,p=Object(l.a)(s),d=Object(i.useRef)(!1),h=u.a.canUseIntersectionObserver;return Object(i.useEffect)((function(){return!h&&p&&window.docusaurus.prefetch(s),function(){h&&t&&t.disconnect()}}),[s,h,p]),s&&p?r.a.createElement(a.b,Object(o.a)({},e,{onMouseEnter:function(){d.current||(window.docusaurus.preload(s),d.current=!0)},innerRef:function(e){var n,o;h&&e&&p&&(n=e,o=function(){window.docusaurus.prefetch(s)},(t=new window.IntersectionObserver((function(e){e.forEach((function(e){n===e.target&&(e.isIntersecting||e.intersectionRatio>0)&&(t.unobserve(n),t.disconnect(),o())}))}))).observe(n))},to:s})):r.a.createElement("a",Object(o.a)({},e,{href:s}))}},510:function(e,t,n){"use strict";function o(e){return!1===/^(https?:|\/\/)/.test(e)}n.d(t,"a",(function(){return o}))},512:function(e,t,n){"use strict";var o=n(5),i=n(0),r=n.n(i),a=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t.prototype.render=function(){var e="highlight highlight-"+this.props.type;return(r.a.createElement("div",{class:e},r.a.createElement("div",{class:"highlight-heading"},r.a.createElement("h5",null,r.a.createElement("div",{class:"highlight-icon"},this.props.icon),this.props.header)),r.a.createElement("div",{class:"highlight-content"},this.props.children)))},t}(i.Component);t.a=a},513:function(e,t,n){"use strict";var o=n(5),i=n(0),r=n.n(i),a=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props.noShadow||!1,t=this.props.width,n=this.props.height;return e?r.a.createElement("div",{class:"figure noshadow"},r.a.createElement("a",{href:this.props.imageSource,target:"_blank"},r.a.createElement("img",{width:t,height:n,src:this.props.imageSource})),r.a.createElement("p",null,this.props.caption)):r.a.createElement("div",{class:"figure"},r.a.createElement("a",{href:this.props.imageSource,target:"_blank"},r.a.createElement("img",{width:t,height:n,src:this.props.imageSource})),r.a.createElement("p",null,this.props.caption))},t}(i.Component);t.a=a},517:function(e,t,n){"use strict";var o=n(5),i=n(0),r=n.n(i),a=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t.prototype.render=function(){return r.a.createElement("code",null,this.props.text)},t}(i.Component);t.a=a},518:function(e,t,n){"use strict";var o=n(5),i=n(0),r=n.n(i),a=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t.prototype.render=function(){return r.a.createElement("i",null,this.props.text)},t}(i.Component);t.a=a},519:function(e,t,n){"use strict";var o=n(5),i=n(0),r=n.n(i),a=n(512),l=r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},r.a.createElement("path",{"fill-rule":"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})),c=function(e){function t(){return e.apply(this,arguments)||this}return Object(o.a)(t,e),t.prototype.render=function(){return r.a.createElement(a.a,{color:"var(--highlight-color-note)",header:"Note",type:"note",icon:l},this.props.children)},t}(i.Component);t.a=c}}]);